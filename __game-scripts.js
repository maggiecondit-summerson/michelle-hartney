var FloatingObject=pc.createScript("floatingObject");FloatingObject.attributes.add("amplitude",{type:"number",default:.5,title:"Amplitude"}),FloatingObject.attributes.add("frequency",{type:"number",default:1,title:"Frequency"}),FloatingObject.attributes.add("offset",{type:"number",default:.5,title:"Offset"}),FloatingObject.prototype.initialize=function(){this.initialPosition=this.entity.getLocalPosition().clone(),this.time=0},FloatingObject.prototype.update=function(t){this.time+=t;var i=this.initialPosition.y+Math.sin(this.time*this.frequency+this.offset)*this.amplitude;this.entity.setLocalPosition(this.initialPosition.x,i,this.initialPosition.z)};var Videotexture=pc.createScript("videotexture");Videotexture.attributes.add("screenMaterial",{type:"asset",assetType:"material",title:"Screen material"}),Videotexture.attributes.add("materials",{type:"asset",assetType:"material",array:!0}),Videotexture.attributes.add("videoAsset",{type:"asset",assetType:"audio"}),Videotexture.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.playVideo()},Videotexture.prototype.initialize=function(){var e=this.app,t=new pc.Texture(e.graphicsDevice,{format:pc.PIXELFORMAT_R5_G6_B5,autoMipmap:!1});t.minFilter=pc.FILTER_LINEAR,t.magFilter=pc.FILTER_LINEAR,t.addressU=pc.ADDRESS_CLAMP_TO_EDGE,t.addressV=pc.ADDRESS_CLAMP_TO_EDGE;var i=document.createElement("video");i.addEventListener("canplay",(function(e){t.setSource(i)})),i.src=this.videoAsset.getFileUrl(),i.crossOrigin="anonymous",i.loop=!1;var a=i.style;a.width="1px",a.height="1px",a.position="absolute",a.opacity="0",a.zIndex="-1000",a.pointerEvents="none",document.body.appendChild(i);var r=this.screenMaterial.resource;r.emissiveMap=t,r.update(),this.videoTexture=t,this.entity.collision.on("triggerenter",(function(e){i.play()}),this),this.entity.collision.on("triggerleave",(function(e){i.pause()}),this),this.upload=!0},Videotexture.prototype.update=function(e){this.upload=!this.upload,this.upload&&this.videoTexture.upload()};var FirstPersonMovement=pc.createScript("firstPersonMovement");FirstPersonMovement.attributes.add("camera",{type:"entity",description:"Optional, assign a camera entity, otherwise one is created"}),FirstPersonMovement.attributes.add("power",{type:"number",default:2500,description:"Adjusts the speed of player movement"}),FirstPersonMovement.attributes.add("lookSpeed",{type:"number",default:.25,description:"Adjusts the sensitivity of looking"}),FirstPersonMovement.prototype.initialize=function(){this.force=new pc.Vec3,this.eulers=new pc.Vec3;var e=this.app;e.mouse.on("mousemove",this._onMouseMove,this),e.mouse.on("mousedown",(function(){e.mouse.enablePointerLock()}),this),this.entity.collision||console.error("First Person Movement script needs to have a 'collision' component"),this.entity.rigidbody&&this.entity.rigidbody.type===pc.BODYTYPE_DYNAMIC||console.error("First Person Movement script needs to have a DYNAMIC 'rigidbody' component")},FirstPersonMovement.prototype.update=function(e){this.camera||this._createCamera();var t=this.force,s=this.app,o=this.camera.forward,i=this.camera.right,r=0,n=0;(s.keyboard.isPressed(pc.KEY_A)||s.keyboard.isPressed(pc.KEY_Q))&&(r-=i.x,n-=i.z),s.keyboard.isPressed(pc.KEY_D)&&(r+=i.x,n+=i.z),s.keyboard.isPressed(pc.KEY_W)&&(r+=o.x,n+=o.z),s.keyboard.isPressed(pc.KEY_S)&&(r-=o.x,n-=o.z),0===r&&0===n||(t.set(r,0,n).normalize().scale(this.power),this.entity.rigidbody.applyForce(t)),this.camera.setLocalEulerAngles(this.eulers.y,this.eulers.x,0)},FirstPersonMovement.prototype._onMouseMove=function(e){(pc.Mouse.isPointerLocked()||e.buttons[0])&&(this.eulers.x-=this.lookSpeed*e.dx,this.eulers.y-=this.lookSpeed*e.dy)},FirstPersonMovement.prototype._createCamera=function(){this.camera=new pc.Entity,this.camera.setName("First Person Camera"),this.camera.addComponent("camera"),this.entity.addChild(this.camera),this.camera.translateLocal(0,.5,0)};